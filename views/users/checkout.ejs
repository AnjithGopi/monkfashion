<%-include('../layouts/headerUser')-%>
    <div class="mobile-header-active mobile-header-wrapper-style">
        <div class="mobile-header-wrapper-inner">
            <div class="mobile-header-top">
                <div class="mobile-header-logo">
                    <a href="index.html"><img src="/static/user-assets/imgs/theme/logo.svg" alt="logo" /></a>
                </div>
                <div class="mobile-menu-close close-style-wrap close-style-position-inherit">
                    <button class="close-style search-close">
                        <i class="icon-top"></i>
                        <i class="icon-bottom"></i>
                    </button>
                </div>
            </div>
            <div class="mobile-header-content-area">
                <div class="mobile-search search-style-3 mobile-header-border">
                    <form action="#">
                        <input type="text" placeholder="Search for items…" />
                        <button type="submit"><i class="fi-rs-search"></i></button>
                    </form>
                </div>
                <div class="mobile-menu-wrap mobile-header-border">
                    <div class="main-categori-wrap mobile-header-border">
                        <a class="categori-button-active-2" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                        <div class="categori-dropdown-wrap categori-dropdown-active-small">
                            <ul>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-dress"></i>Women's Clothing</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-tshirt"></i>Men's Clothing</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-smartphone"></i> Cellphones</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-desktop"></i>Computer &
                                        Office</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-cpu"></i>Consumer
                                        Electronics</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-home"></i>Home & Garden</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-high-heels"></i>Shoes</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-teddy-bear"></i>Mother &
                                        Kids</a>
                                </li>
                                <li>
                                    <a href="shop-grid-right.html"><i class="evara-font-kite"></i>Outdoor fun</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- mobile menu start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="index.html">Home</a>
                                <ul class="dropdown">
                                    <li><a href="index.html">Home 1</a></li>
                                    <li><a href="index-2.html">Home 2</a></li>
                                    <li><a href="index-3.html">Home 3</a></li>
                                    <li><a href="index-4.html">Home 4</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="shop-grid-right.html">shop</a>
                                <ul class="dropdown">
                                    <li>
                                        <a href="shop-grid-right.html">Shop Grid – Right Sidebar</a>
                                    </li>
                                    <li>
                                        <a href="shop-grid-left.html">Shop Grid – Left Sidebar</a>
                                    </li>
                                    <li>
                                        <a href="shop-list-right.html">Shop List – Right Sidebar</a>
                                    </li>
                                    <li>
                                        <a href="shop-list-left.html">Shop List – Left Sidebar</a>
                                    </li>
                                    <li><a href="shop-fullwidth.html">Shop - Wide</a></li>
                                    <li class="menu-item-has-children">
                                        <span class="menu-expand"></span><a href="#">Single Product</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="shop-product-right.html">Product – Right Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-left.html">Product – Left Sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-full.html">Product – No sidebar</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li><a href="shop-filter.html">Shop – Filter</a></li>
                                    <li><a href="shop-wishlist.html">Shop – Wishlist</a></li>
                                    <li><a href="shop-cart.html">Shop – Cart</a></li>
                                    <li><a href="shop-checkout.html">Shop – Checkout</a></li>
                                    <li><a href="shop-compare.html">Shop – Compare</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="#">Mega menu</a>
                                <ul class="dropdown">
                                    <li class="menu-item-has-children">
                                        <span class="menu-expand"></span><a href="#">Women's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Dresses</a></li>
                                            <li>
                                                <a href="shop-product-right.html">Blouses & Shirts</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-right.html">Hoodies & Sweatshirts</a>
                                            </li>
                                            <li><a href="shop-product-right.html">Women's Sets</a></li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <span class="menu-expand"></span><a href="#">Men's Fashion</a>
                                        <ul class="dropdown">
                                            <li><a href="shop-product-right.html">Jackets</a></li>
                                            <li>
                                                <a href="shop-product-right.html">Casual Faux Leather</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-right.html">Genuine Leather</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <span class="menu-expand"></span><a href="#">Technology</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="shop-product-right.html">Gaming Laptops</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-right.html">Ultraslim Laptops</a>
                                            </li>
                                            <li><a href="shop-product-right.html">Tablets</a></li>
                                            <li>
                                                <a href="shop-product-right.html">Laptop Accessories</a>
                                            </li>
                                            <li>
                                                <a href="shop-product-right.html">Tablet Accessories</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="blog-category-fullwidth.html">Blog</a>
                                <ul class="dropdown">
                                    <li>
                                        <a href="blog-category-grid.html">Blog Category Grid</a>
                                    </li>
                                    <li>
                                        <a href="blog-category-list.html">Blog Category List</a>
                                    </li>
                                    <li><a href="blog-category-big.html">Blog Category Big</a></li>
                                    <li>
                                        <a href="blog-category-fullwidth.html">Blog Category Wide</a>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <span class="menu-expand"></span><a href="#">Single Product Layout</a>
                                        <ul class="dropdown">
                                            <li><a href="blog-post-left.html">Left Sidebar</a></li>
                                            <li><a href="blog-post-right.html">Right Sidebar</a></li>
                                            <li><a href="blog-post-fullwidth.html">No Sidebar</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="#">Pages</a>
                                <ul class="dropdown">
                                    <li><a href="page-about.html">About Us</a></li>
                                    <li><a href="page-contact.html">Contact</a></li>
                                    <li><a href="page-account.html">My Account</a></li>
                                    <li><a href="page-login-register.html">login/register</a></li>
                                    <li><a href="page-purchase-guide.html">Purchase Guide</a></li>
                                    <li><a href="page-privacy-policy.html">Privacy Policy</a></li>
                                    <li><a href="page-terms.html">Terms of Service</a></li>
                                    <li><a href="page-404.html">404 Page</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <span class="menu-expand"></span><a href="#">Language</a>
                                <ul class="dropdown">
                                    <li><a href="#">English</a></li>
                                    <li><a href="#">French</a></li>
                                    <li><a href="#">German</a></li>
                                    <li><a href="#">Spanish</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                    <!-- mobile menu end -->
                </div>
                <div class="mobile-header-info-wrap mobile-header-border">
                    <div class="single-mobile-header-info mt-30">
                        <a href="page-contact.html"> Our location </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="page-login-register.html">Log In / Sign Up </a>
                    </div>
                    <div class="single-mobile-header-info">
                        <a href="#">(+01) - 2345 - 6789 </a>
                    </div>
                </div>
                <div class="mobile-social-icon">
                    <h5 class="mb-15 text-grey-4">Follow Us</h5>
                    <a href="#"><img src="/static/user-assets/imgs/theme/icons/icon-facebook.svg" alt="" /></a>
                    <a href="#"><img src="/static/user-assets/imgs/theme/icons/icon-twitter.svg" alt="" /></a>
                    <a href="#"><img src="/static/user-assets/imgs/theme/icons/icon-instagram.svg" alt="" /></a>
                    <a href="#"><img src="/static/user-assets/imgs/theme/icons/icon-pinterest.svg" alt="" /></a>
                    <a href="#"><img src="/static/user-assets/imgs/theme/icons/icon-youtube.svg" alt="" /></a>
                </div>
            </div>
        </div>
    </div>
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="index.html" rel="nofollow">Home</a>
                    <span></span> Shop <span></span> Checkout
                </div>
            </div>
        </div>
        <section class="mt-50 mb-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="toggle_info">
                            <span><i class="fi-rs-label mr-10"></i><span class="text-muted">Have a coupon?</span>
                                <a href="#coupon" data-bs-toggle="collapse" class="collapsed"
                                    aria-expanded="false">Click here to enter your code</a></span>
                        </div>
                        <div class="panel-collapse collapse coupon_form borer border-5" id="coupon">
                            <div class="panel-body">
                                <p class="mb-30 font-sm">
                                    If you have a coupon code, please apply it below.
                                </p>
                                <form method="post">
                                    <div class="form-group">
                                        <input type="text" placeholder="Enter Coupon Code..." />
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-md" name="login">Apply Coupon</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                   
                    
                </div>
                <!-- <div class="row">
                    <div class="col-">
                        <div class="divider mt-50 mb-50"></div>
                    </div>
                </div> -->
                <div class="ship_detail ml-20">
                    <div class="form-group">
                        <div class="chek-form">
                            <div class="custome-checkbox">
                                <input class="form-check-input" type="checkbox" name="checkbox" id="differentaddress" />
                                <label class="form-check-label label_info" data-bs-toggle="collapse"
                                    data-target="#collapseAddress" href="#collapseAddress"
                                    aria-controls="collapseAddress" for="differentaddress"><span
                                        class="text-success font-size-lg font-weight-bold">Add New
                                        address</span></label>
                            </div>
                        </div>
                    </div>
                    <div id="collapseAddress" class="different_address collapse in ml-10">
                        <form action="/addAddress" method="post">
                            <div class="">
                                <label for="name">Name :</label>
                                <input type="text" required="" name="fname" placeholder="First name *" />
                            </div>
                            <div class="">
                                <label for="phoneNumber">Phone Number:</label>
                                <input type="tel" id="phone" name="phoneNumber" pattern="[0-9]{10}"
                                    placeholder="Enter your phone number *" required />
                            </div>
                            <div class="">
                                <label for="altphoneNumber">Alternate Number:</label>
                                <input type="tel" id="phone2" name="phone2" pattern="[0-9]{10}"
                                    placeholder="Alternate phone number" />
                            </div>
                            <div class="">
                                <label for="houseName">House Name</label>
                                <input required="" type="text" name="cname" placeholder="House no / Name" />
                            </div>

                            <div class="">
                                <label for="city">City</label>
                                <input required="" type="text" name="city" placeholder="City / Town *" />
                            </div>
                            <div class="">
                                <label for="state">State</label>
                                <input required="" type="text" name="state" placeholder="State / County *" />
                            </div>
                            <div class="">
                                <label for="pincode">Pincode</label>
                                <input required="" type="text" name="pincode" pattern="[0-9]{6}"
                                    placeholder="Postcode / ZIP *" />
                            </div>
                            <div class="">
                                <label for="LandMark">Land Mark</label>
                                <input type="text" name="landMark" placeholder="Add Land mark" />
                            </div>
                            <div class=" ml-10">
                                <button type="submit" onclick="validateForm()">
                                    Add new address
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                <form method="post" id="myForm" action="/home/cart/checkout/placeorder">
                    <div class="row ml-10">
                        <div class="col-md-6">
                            <div class="mb-25">
                                <h4>Billing Details</h4>
                            </div>
                            <% if ( address.length> 0 ) { %> <% for ( let i=0 ; i < address.length ; i++) { %>

                                    <div class="form-check">
                                        <input type="radio" id="address1" name="address" value="<%=i%>"  class="form-check-input"
                                            required <% if (i===0) { %> checked <% } %>>
                                            <label class="form-check-label" for="address1">Address <%=i+1%></label>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">
                                                    <%= address[i].fullName %>
                                                </h5>
                                            </div>
                                            <div class="card-body">
                                                <address>
                                                    <%=address[i].houseName %> &nbsp; <%= address[i].city %>
                                                            <%=address[i].state %> <br />
                                                                <%= address[i].pincode %>
                                                                    <br />
                                                                    <%=address[i].phone %>
                                                </address>
                                                <% if( address[i].landMark) { %>
                                                    <p>
                                                        <%= address[i].landMark %>
                                                    </p>
                                                    <% } %>
                                            </div>
                                        </div>
                                    </div>
                                    <% } } else { %>
                                        <p>No address saved add new address</p>
                                        <% } %>

                                          

                                            
                        </div>
                        <div class="col-md-6">
                            <div class="order_review">
                                <div class="mb-20">
                                    <h4>Your Orders</h4>
                                </div>
                                <div class="table-responsive order_table text-center">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th colspan="2">Product</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% if(cartData[0].product.length > 0) { %>
                                                 <% for(let i=0; i < cartData[0].product.length; i++) { %>

                                                    <tr>
                                                        <td class="image product-thumbnail">
                                                            <img src="/static/admin/images/product/<%= cartData[0].product[i].productId.image[0]%>"
                                                                alt="#" />
                                                        </td>
                                                        <td>
                                                            <h5>
                                                                <a href="shop-product-full.html">
                                                                    <%= (cartData[0].product[i].productId.name )%>
                                                                </a>
                                                            </h5>
                                                            <span class="product-qty">x <%=
                                                                    cartData[0].product[i].quantity%></span>
                                                        </td>
                                                        <td>
                                                            <%= cartData[0].product[i].productId.salePrice%>
                                                        </td>
                                                        <td>
                                                            <span id="totalAmount_">
                                                                <%= (cartData[0].product[i].productId.salePrice *
                                                                    cartData[0].product[i].quantity)%>
                                                            </span>
                                                        </td>
                                                    </tr>
                                                    <% } } else { %>
                                                        <p>No Data available</p>
                                                        <% } %>

                                                            <tr>
                                                                <th>SubTotal</th>

                                                                <td class="product-subtotal" colspan="3">
                                                                    <span id="totalCartValue"></span>
                                                                </td>
                                                            </tr>
                                                            <tr>
                                                                <th>Shipping</th>
                                                                <td colspan="3"><em>Free Shipping</em></td>
                                                            </tr>
                                                            <tr>
                                                                <th>Total</th>
                                                                <td colspan="3" class="product-subtotal">
                                                                    <span class="font-xl text-brand fw-900"
                                                                        id="checkoutPrice"></span>
                                                                </td>
                                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="bt-1 border-color-1 mt-30 mb-30"></div>
                                <div class="payment_method">
                                    <div class="mb-25">
                                        <h5>Payment</h5>
                                    </div>
                                    <div class="payment_option">
                                        <div class="custome-radio">
                                            <input class="form-check-input" required="" type="radio"
                                                name="payment_option" value="Cash On Delivery" id="exampleRadios3" checked="" />
                                            <label class="form-check-label" for="exampleRadios3"
                                                data-bs-toggle="collapse" data-target="#cash" aria-controls="cash">Cash
                                                on Delivery</label>
                                            <div class="form-group collapse in" id="cash">
                                                <p class="text-muted mt-5">
                                                    There are many variations of passages of Lorem Ipsum
                                                    available, but the majority have suffered alteration.
                                                </p>
                                            </div>
                                        </div>

                                        <div class="custome-radio">
                                            <input class="form-check-input" required="" type="radio"
                                                name="payment_option" value="Online" id="exampleRadios5"  />
                                            <label class="form-check-label" for="exampleRadios5"
                                                data-bs-toggle="collapse" data-target="#paypal"
                                                aria-controls="paypal">Paypal</label>
                                            <div class="form-group collapse in" id="paypal">
                                                <p class="text-muted mt-5">
                                                    Pay via PayPal; you can pay with your credit card if you
                                                    don't have a PayPal account.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <a href="#" class="btn btn-fill-out btn-block mt-30">Place Order</a> -->
                                <input type="button" onclick="placeOrder()" class="btn btn-fill-out btn-block mt-30" value="Place Order" />
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>
    </main>
    <%-include('../layouts/footerUser')-%>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>

        // Script to Place ORder
     function placeOrder() {
       
        const paymentForm = document.getElementById('myForm');
        const totalCartValue = document.getElementById('totalCartValue').innerText;
        console.log("subtotal::",totalCartValue)

        // Find the selected radio button
        const selectedRadioButtonPayment = paymentForm.querySelector('input[name="payment_option"]:checked');
        const selectedRadioButtonAddress = paymentForm.querySelector('input[name="address"]:checked');


        // Check if a radio button is selected
        if (selectedRadioButtonPayment && selectedRadioButtonAddress) {
            const selectedValuePayment = selectedRadioButtonPayment.value;
            const selectedValueAddress = selectedRadioButtonAddress.value;
            console.log('Selected Payment Option:', selectedValuePayment);
            console.log('Selected Address:', selectedValueAddress);
            Swal.fire({
                title: 'Placed Order',
                text: 'Are you sure to place the order ?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#088178',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Place Order'
                }).then((result) => {
                if (result.isConfirmed) {
                    // Handle the confirmed action here
                    if( selectedValuePayment == "Online"){
                        paymentRazorpay(selectedValuePayment,selectedValueAddress,totalCartValue)

                    }else{
                        let paymentStatus = "Pending"
                        sendOrderToBackend(selectedValuePayment,selectedValueAddress,paymentStatus)
                    }
                    
                    
              

                } else {
                    // Handle the canceled action here
                    Swal.fire('Cancelled', 'Order cancelled sucessfully ', 'info');
                }
                });
            
        }else{
            toastr.warning("Select address and Payment method");
        }
    }

    function sendOrderToBackend(paymentMethod,address,paymentStatus){
        console.log("SEND ORDER BACKEND FUNCTION RECIEVED")

        fetch('/home/cart/checkout/placeorder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    addressIndex: address,
                    paymentMethod: paymentMethod,
                    paymentStatus: paymentStatus
                    
                    
                }),
            })
            .then(response => response.json())
            .then(data => {
                console.log("got the response of...")
                // location.reload();
              
                if( data.warningMessage){
                     toastr.warning(data.warningMessage);

                 }
                 if (data.success) {
                    console.log("order send backend Success worked");
                    // alert("Send to backend success")
                    Swal.fire({
                                    title: 'Success',
                                    icon: 'success',
                                    confirmButtonText: 'Close',
                                }).then((result) => {
                                    if (result.isConfirmed) {
                                        Swal.close();
                                        // Redirect to the home page
                                        window.location.href = '/home'; // Change this to the actual URL of your home page
                                    }
                                });
                    // console.log(data.key_id);
                    // console.log(data.orderData);
                    // console.log("total amount",data.orderData.totalAmount);
                    // console.log(typeof(data.orderData.totalAmount));
                    // console.log("order id",data.orderData.orderId);
                    // console.log(typeof(data.orderData.totalAmount));
                  


                    

                 } else{
                    alert('FAILEDD')
                 }

            })
            .catch(error => {
                console.error('Error updating quantity:', error);
            });
         
        }  
        
        
    function  paymentRazorpay(paymentMethod,address,cartValue){
        console.log("PAYMENT FUNCTION RECIEVED")
        fetch('/home/cart/checkout/razorpay', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    addressIndex: address,
                    paymentMethod: paymentMethod,
                    cartValue :cartValue
                }),
            })
            .then(response => response.json())
            .then(data => {
                console.log("got the response of...")
                // location.reload();
              
                if( data.warningMessage){
                     toastr.warning(data.warningMessage);

                 }
                 if (data.success) {
    console.log("Success worked");
    console.log(data.key_id);
    console.log(data.orderData);
    console.log("total amount",data.orderData.totalAmount);
    console.log(typeof(data.orderData.totalAmount));
    console.log("order id",data.orderData.id);
    console.log(typeof(data.orderData.totalAmount));
                    const amount = JSON.stringify(data.orderData.totalAmount)*100;
                    console.log(amount)
                    console.log(typeof(amount))
                    var options = {
                        "key":""+data.key_id+"",
                        "amount":data.totalAmount,
                        "currency": "INR",
                        "name": "Monk Fashion",
                        "description": "Test Transaction",
                        "image": "/static/asset/images/MONK FASHIONS.png",
                        "order_id":data.orderData.id,
                        "handler": function (status) {
                            // toastr.success("Payment Success");
                            if (status.razorpay_payment_id) {
                                // Payment success
                                toastr.success("Payment Success");
                        let paymentStatus = "Success"

                        sendOrderToBackend(paymentMethod,address,paymentStatus)

                               
                             } else {
                                // Payment failed
                                toastr.error("Payment Failed");
                                // alert("Payment failed");
                            }
                        },
                        "prefill": {
                            "name": "Abhilash V S",
                            "email": "abhilash@example.com",
                            "contact": "9000090000"
                        },
                        "notes": {
                            "address": "Razorpay Corporate Office"
                        },
                        "theme": {
                            "color": "#088178"
                        }
                    };

                    var rzp1 = new Razorpay(options);

                    rzp1.on('payment_failed', function (data) {
                        alert("Payment failed");
                    });

                    rzp1.open();


                    

                 } else{
                    alert('FAILEDD')
                 }

            })
            .catch(error => {
                console.error('Error updating quantity:', error);
            });
    }
       

    </script>
    <script>
        // FUNCTION TO UPDATE THE TOTAL VALUE OF THE CART
        window.onload = () => {
            updateTotal();
        };

        function updateTotal() {
            console.log("worked the total");
            const subtotal = document.querySelectorAll('[id^="totalAmount_"]');

            console.log("subtotal ", subtotal);
            let total = 0;

            subtotal.forEach((element) => {
                total += parseFloat(element.innerText.replace("$", ""));
            });

            document.getElementById("totalCartValue").innerText = total.toFixed(2);
            document.getElementById("checkoutPrice").innerText = total.toFixed(2);
        }
    </script>
    <script>
        function validateForm() {
            // Reset error messages
            document.getElementById("nameError").textContent = "";
            document.getElementById("phoneError").textContent = "";

            // Get form values
            var name = document.forms["addressForm"]["fname"].value;
            var phone = document.forms["addressForm"]["phoneNumber"].value;

            // Validate name
            if (name.trim() === "") {
                document.getElementById("nameError").textContent = "Name is required.";
            }

            // Validate phone number
            if (!/^[0-9]{10}$/.test(phone)) {
                document.getElementById("phoneError").textContent =
                    "Please enter a valid phone number.";
            }

            // Add similar validation for other fields

            // If any error messages are present, prevent form submission
            if (
                document.getElementById("nameError").textContent ||
                document.getElementById("phoneError").textContent
            ) {
                event.preventDefault();
            }
        }
    </script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var applyCouponBtn = document.getElementById("applyCouponBtn");
        var anotherForm = document.getElementById("anotherForm");

        applyCouponBtn.addEventListener("click", function () {
            // Toggle the visibility of the new form
            anotherForm.style.display = (anotherForm.style.display === "none") ? "block" : "none";
        });
    });
</script>

 

